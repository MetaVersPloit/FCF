(window.webpackJsonp=window.webpackJsonp||[]).push([[85],{1866:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function e(t){const{items:n,placement:o="bottom-start",target:u,onHide:c=(()=>{}),hoverDelay:i=250,contextMenuStyles:m}=t,b=null!=(0,d.useContext)(h),x=(0,d.useRef)(null),M=(0,d.useRef)(null),[E,I]=(0,d.useReducer)(v,{expandedMenuId:null,submenuTarget:null,isPlacementFlipped:!1}),k=(0,d.useCallback)(()=>{I({type:"close_submenu"})},[]),C=(0,d.useCallback)((e,t)=>{I({type:"open_submenu",payload:{parentMenuId:e.id,submenuTarget:t}})},[]);(0,l.useShortcut)("esc",()=>(c(),!0)),(0,s.default)(c,x);const O=(0,d.useCallback)((e,t)=>{e.submenu&&t?C(e,t):(e.onClick&&e.onClick(e),c())},[C,c]),P=(0,d.useCallback)(e=>{"ArrowLeft"===e.key&&E.expandedMenuId&&(k(),e.stopPropagation())},[E.expandedMenuId,k]),S=(0,d.useCallback)((e,t)=>{M.current&&(window.clearTimeout(M.current),M.current=null),t&&t.focus(),!e.disabled&&e.submenu&&t?M.current=window.setTimeout(()=>{C(e,t)},i):E.expandedMenuId&&(M.current=window.setTimeout(()=>{k()},i))},[E,k,C,i]),_=(0,d.useCallback)(()=>{M.current&&(window.clearTimeout(M.current),M.current=null)},[]),L=(0,d.useCallback)(e=>{e.stopPropagation()},[]),T=(0,d.useCallback)(()=>{c()},[c]),j=(0,d.useCallback)(()=>{I({type:"placement_flipped"})},[]);(0,d.useLayoutEffect)(()=>{const e=x.current;return e.addEventListener("mousedown",L),window.addEventListener("blur",T),()=>{e.removeEventListener("mousedown",L),window.removeEventListener("blur",T)}},[L,T,x]);const R=E.expandedMenuId&&E.submenuTarget&&n.find(e=>e&&"separator"!==e.type&&e.id===E.expandedMenuId),B=n.filter(Boolean);B[0]&&"separator"===B[0].type&&B.shift();B[B.length-1]&&"separator"===B[B.length-1].type&&B.pop();const H=B.reduce((e,t,n,r)=>{if("separator"===t.type){if(!r[n+1]||"separator"===r[n+1].type)return e;e[e.length-1].push(t),n!==r.length-1&&e.push([])}else e[e.length-1].push(t);return e},[[]]);return(d.default.createElement(p.default,{name:"contextMenu"},d.default.createElement(h.Provider,{value:{}},d.default.createElement(f.default,{isBlocking:!b,target:null!=u.type&&"keydown"===u.type?u.target:u,ref:x,placement:o,onKeyDown:P,disableDefaultAnimation:!0,onFlipped:j},d.default.createElement(y,{isSubmenu:b,isPlacementFlipped:E.isPlacementFlipped},d.default.createElement(r.default,null,d.default.createElement(a.default,null,H.map((e,t)=>d.default.createElement(w,{key:t,expandedMenuId:E.expandedMenuId,items:e,onItemMouseEnter:S,onItemMouseLeave:_,onItemClicked:O,onOpenSubmenu:C,contextMenuStyles:m})))),E.expandedMenuId&&E.submenuTarget&&R&&R.submenu&&d.default.createElement(e,g({},t,{onHide:c,placement:"right-start",items:R.submenu,target:E.submenuTarget,contextMenuStyles:m})))))))};var r=b(n(188)),a=b(n(33)),o=n(1952),u=b(n(1953)),l=n(84),s=b(n(354)),c=b(n(1)),d=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=m();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var o=r?Object.getOwnPropertyDescriptor(e,a):null;o&&(o.get||o.set)?Object.defineProperty(n,a,o):n[a]=e[a]}n.default=e,t&&t.set(e,n);return n}(n(0)),i=b(n(2)),f=b(n(91)),p=b(n(13));function m(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return m=function(){return e},e}function b(e){return e&&e.__esModule?e:{default:e}}function g(){return(g=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}const h=d.default.createContext(null);const y=(0,c.default)(i.default)(e=>({backgroundColor:e.theme.semanticColors.bgSurfaceBlurred,...e.theme.effects.blur,padding:e.theme.select({mac:"4px 0px",windows:"2px 0px"}),marginTop:e.isSubmenu?e.theme.select({mac:-4,windows:-2}):0,marginLeft:e.isSubmenu&&!e.isPlacementFlipped?-4:0,marginRight:e.isSubmenu&&e.isPlacementFlipped?-4:0,borderRadius:e.theme.select({mac:5}),minWidth:150,maxWidth:270,pointerEvents:"auto",boxShadow:"0 4px 14px 0 rgba(0, 0, 0, 0.12), 0 0 1px 0 rgba(0, 0, 0, 0.20)",border:e.theme.select({highContrast:`1px solid ${e.theme.colors.base80}`})}));function v(e,t){switch(t.type){case"open_submenu":return{...e,expandedMenuId:t.payload.parentMenuId,submenuTarget:t.payload.submenuTarget};case"close_submenu":return{...e,expandedMenuId:null,submenuTarget:null};case"placement_flipped":return{...e,isPlacementFlipped:!0}}return e}function w(e){const{expandedMenuId:t,items:n,onItemClicked:r,onItemMouseEnter:a,onItemMouseLeave:l,onOpenSubmenu:s,contextMenuStyles:c}=e,i=n.some(e=>e&&"separator"!==e.type&&e.icon),f=n.some(e=>e&&"separator"!==e.type&&e.accelerator);return d.default.createElement(d.default.Fragment,null,n.filter(Boolean).map((e,n)=>"separator"===e.type?d.default.createElement(u.default,{key:n}):d.default.createElement(o.ContextMenuButton,{key:e.id,item:e,hasExpandedMenu:e.id===t,otherItemsHaveAccelerator:f,otherItemsHaveIcons:i,onItemMouseEnter:a,onItemMouseLeave:l,onItemClicked:r,onOpenSubmenu:s,contextMenuStyles:c})))}},1952:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ContextMenuButton=function(e){const{hasExpandedMenu:t,item:n,otherItemsHaveIcons:r,otherItemsHaveAccelerator:o,onOpenSubmenu:u,onItemClicked:s,onItemMouseEnter:f,onItemMouseLeave:p,contextMenuStyles:m}=e,E=(0,a.useTheme)(),k=(0,i.useRef)(null),C=(0,i.useCallback)(()=>{f(n,k.current)},[f,n]),O=(0,i.useCallback)(()=>{p(n)},[p,n]),P=(0,i.useCallback)(()=>{s(n,k.current)},[s,n]),S=(0,i.useCallback)(e=>{"ArrowRight"===e.key&&(e.stopPropagation(),window.setTimeout(()=>u(n,k.current),0))},[u,n]),_=m?m.accentColor:void 0,L=(0,i.useMemo)(()=>function(e,t,n){if(t)return{};const r=e.select({light:g,dark:b});if(!n)return{backgroundColor:r(e.semanticColors.primary)};if(Array.isArray(n))return(0,l.getThreadThemeGradientBackground)(n.map(e=>r(e)));return{backgroundColor:r(n)}}(E,n.disabled,_),[E,n.disabled,_]);return i.default.createElement(h,{ref:k,telemetryName:n.id,disabled:n.disabled,hoverProps:L,hasExpandedMenu:t,onActivate:P,onKeyDown:S,contextMenuStyles:m,onMouseEnter:C,onMouseLeave:O},i.default.createElement(M,null,i.default.createElement(I,{isLeft:!0,otherItemsHaveIcons:!0,contentOverride:!n.selected&&n.statusBadge?n.statusBadge:void 0,icon:n.selected?c.default:void 0}),i.default.createElement(I,{isLeft:!0,otherItemsHaveIcons:r,icon:n.icon,iconColor:n.styles&&n.styles.iconColor}),i.default.createElement(w,null,i.default.createElement(y,{color:n.styles&&n.styles.textColor,wrapText:!0},n.label)),i.default.createElement(x,{acceleratorSpacer:o},n.submenu?i.default.createElement(I,{icon:d.default}):n.accelerator&&i.default.createElement(v,{color:E.colors.base70},n.accelerator))),n.subtext&&i.default.createElement(M,null,i.default.createElement(I,{isLeft:!0,otherItemsHaveIcons:!0}),i.default.createElement(v,{color:E.colors.base70,paddingRight:!0},n.subtext),i.default.createElement(x,{acceleratorSpacer:o},i.default.createElement("div",null))))};var r=m(n(2)),a=n(6),o=f(n(4)),u=f(n(85)),l=n(105),s=f(n(1)),c=f(n(114)),d=f(n(161)),i=m(n(0));function f(e){return e&&e.__esModule?e:{default:e}}function p(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return p=function(){return e},e}function m(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=p();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var o=r?Object.getOwnPropertyDescriptor(e,a):null;o&&(o.get||o.set)?Object.defineProperty(n,a,o):n[a]=e[a]}return n.default=e,t&&t.set(e,n),n}function b(e){return(0,u.default)(e).fade(.2).toString()}function g(e){return(0,u.default)(e).darken(.2).toString()}const h=(0,s.default)(r.FocusableView)(({hasExpandedMenu:e,hoverProps:t,disabled:n,theme:r})=>({paddingTop:5,paddingBottom:5,paddingLeft:4,paddingRight:8,justifyContent:"space-between",backgroundColor:e?r.colors.base20:void 0,":hover":{"*":{color:n?void 0:r.semanticColors.textWhite},...t},opacity:n?.5:void 0})),y=(0,s.default)(o.default)(e=>({fontSize:e.theme.select({mac:13,windows:15}),overflow:"hidden",textOverflow:"ellipsis"})),v=(0,s.default)(o.default)(e=>({fontSize:e.theme.select({mac:12,windows:13}),paddingRight:e.paddingRight?"16px":0})),w=(0,s.default)(r.default)(e=>({flex:1})),x=(0,s.default)(r.default)(e=>({marginLeft:15,textAlign:"right",minWidth:e.acceleratorSpacer?60:void 0,alignItems:"flex-end"})),M=(0,s.default)(r.default)({flex:1,alignItems:"center",flexDirection:"row"});const E=(0,s.default)(r.default)(e=>({marginRight:e.isLeft?4:void 0,width:16}));function I(e){const{contentOverride:t,icon:n,iconColor:o,isLeft:u,otherItemsHaveIcons:l}=e,s=(0,a.useTheme)(),c=n;return n||l?i.default.createElement(E,{isLeft:u},t&&i.default.createElement(r.default,{css:{width:16,alignItems:"center",justifyContent:"center"}},t),c&&!t&&i.default.createElement(c,{size:16,color:o||s.semanticColors.textPrimary})):null}},1953:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(n(1)),a=o(n(2));function o(e){return e&&e.__esModule?e:{default:e}}var u=(0,r.default)(a.default)(e=>({height:e.theme.select({mac:10,windows:8}),":before":{content:"''",position:"absolute",height:1,top:"calc(50% - 0.5px)",left:0,right:0,backgroundColor:e.theme.colors.base40}}));t.default=u}}]);
//# sourceMappingURL=https://intern.facebook.com/intern/messenger/desktop/sourcemaps?archon_build_number=332019425&map_path=../sourcemaps/ContextMenu.bundle.js.map