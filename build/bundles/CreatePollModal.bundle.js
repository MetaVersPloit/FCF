(window.webpackJsonp=window.webpackJsonp||[]).push([[25],{575:function(e,t,l){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=v(l(33)),a=l(58),o=l(325),r=v(l(5)),u=v(l(341)),d=v(l(1)),i=l(28),c=l(23),f=l(11),s=E(l(0)),m=E(l(2)),p=v(l(60)),y=l(6),h=v(l(73)),g=v(l(4));function b(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return b=function(){return e},e}function E(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=b();if(t&&t.has(e))return t.get(e);var l={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var o=n?Object.getOwnPropertyDescriptor(e,a):null;o&&(o.get||o.set)?Object.defineProperty(l,a,o):l[a]=e[a]}return l.default=e,t&&t.set(e,l),l}function v(e){return e&&e.__esModule?e:{default:e}}const C=(0,d.default)(p.default)(e=>({backgroundColor:e.theme.select({light:e.theme.semanticColors.bgSurfaceSecondary,dark:e.theme.colors.flatBase50}),height:26,marginTop:-4})),P=(0,d.default)(m.default)({marginBottom:4,minHeight:26}),M=(0,d.default)(m.default)({paddingTop:24,paddingRight:18});const x={createPoll:c.InboxActions.polls.createPoll,clearModal:i.AppContextActions.clearModal};var k=(0,f.connect)(null,x)((function(t){const[l,d]=(0,s.useState)(null),[i,c]=(0,s.useState)([]),[f,p]=(0,s.useState)(!1),[b,E]=(0,s.useState)(void 0),[v,x]=(0,s.useState)(void 0),k=(0,y.useTheme)(),w=(0,u.default)(t.threadKey),A=r.default._("What's your poll about?",null,{hk:"3Tjg5M"}).toString();function O(){const e=null==b?void 0:b.trim();null!=e&&0===e.length&&E(void 0),p(!1)}const S=f?s.default.createElement(P,null,s.default.createElement(C,{onBlur:O,autoFocus:!0,maxLength:140,placeholder:A,enableEmoticonTranslation:!0,value:b,textUse:"body-bold",textAlign:"center",removeBorder:!0,onChange:e=>E(e),onKeyPress:e=>{e.metaKey||e.altKey||e.shiftKey||e.ctrlKey||"Enter"===e.key&&O()}})):null!=b?s.default.createElement(o.TitleContainer,{onActivate:()=>p(!0)},s.default.createElement(g.default,{use:"body-bold",textAlign:"center",wrapText:!0},b)):s.default.createElement(o.TitleContainer,{onActivate:()=>p(!0)},s.default.createElement(g.default,{use:"body-bold",textAlign:"center",color:k.semanticColors.textSecondary},A));function B(t,l){d(null);const n=null==v?void 0:v.trim();null!=v&&null!=n&&(0===n.length?delete i[t]:i[t]=n,c(i.filter(Boolean)),x(void 0),l&&e(()=>d(t+1)))}let _=i.map((e,t)=>s.default.createElement(o.EditableOption,{key:t,showTextInput:t===l,uneditedElement:s.default.createElement(h.default,{tooltipProps:{children:()=>s.default.createElement(g.default,{use:"caption",color:k.semanticColors.textPrimary},e)},delay:1e3},s.default.createElement(m.FocusableView,{onActivate:()=>{x(i[t]),d(t)}},s.default.createElement(o.PollOptionContainer,{key:t},s.default.createElement(g.default,{use:"body-semibold",textAlign:"left"},e)))),inputValue:v,finalize:()=>B(t),onChange:e=>x(e)}));const T=Math.max(1,1-_.length),K=_.length;_=_.concat(Array(T).fill(0).map((e,t)=>s.default.createElement(o.EditableOption,{key:t,showTextInput:t+K===l,uneditedElement:s.default.createElement(m.FocusableView,{onActivate:()=>d(t+K)},s.default.createElement(o.PollOptionContainer,{key:t+K},s.default.createElement(g.default,{use:"body-semibold",textAlign:"left",color:k.semanticColors.textTertiary},o.addOptionString))),inputValue:v,finalize:e=>B(t+K,e),onChange:e=>x(e)})));const j=r.default._("Create Poll",null,{hk:"zK1QL"}).toString();return(s.default.createElement(m.default,null,s.default.createElement(M,null,s.default.createElement(o.ScrollContainer,null,s.default.createElement(o.Container,null,S,s.default.createElement(n.default,null,_)))),s.default.createElement(a.ModalFooter,{cancelButton:{label:o.cancelButtonString,telemetryName:"cancelPollButton",onClick:t.clearModal},primaryButton:{label:j,telemetryName:"createPollButton",onClick:()=>{const e=i.filter(Boolean);b&&(t.createPoll(t.threadKey,b,e),t.onPollCreated())},disabled:null==b||0===b.trim().length||i.filter(Boolean).length<1},threadColor:null==w?void 0:w.color,gradientColors:null==w?void 0:w.gradientColors})))}));t.default=k}).call(this,l(231).setImmediate)},647:function(e,t,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=c(l(575)),a=c(l(5)),o=l(28),r=l(11),u=c(l(0)),d=l(58),i=c(l(13));function c(e){return e&&e.__esModule?e:{default:e}}const f={clearModal:o.AppContextActions.clearModal};var s=(0,r.connect)(null,f)((function({threadKey:e,clearModal:t}){if(!e)return t(),null;const l=a.default._("Create a Poll",null,{hk:"3JnqaV"}).toString();return(u.default.createElement(i.default,{name:"createPollModal"},u.default.createElement(d.Modal,{width:340,"aria-label":l,onHideModal:t,modalType:"autosize"},u.default.createElement(d.ModalHeader,{title:l,hideCloseButton:!0}),u.default.createElement(n.default,{threadKey:e,onPollCreated:t}))))}));t.default=s}}]);
//# sourceMappingURL=https://intern.facebook.com/intern/messenger/desktop/sourcemaps?archon_build_number=332019425&map_path=../sourcemaps/CreatePollModal.bundle.js.map