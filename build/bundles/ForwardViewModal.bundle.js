(window.webpackJsonp=window.webpackJsonp||[]).push([[90],{1879:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return h.default.createElement(w.DynamicModuleLoader,{strictMode:!0,modules:[o.ContactSuggestionsModule]},h.default.createElement(K,e))},t.ForwardItemStatus=void 0;var r=P(a(27)),n=a(8),s=P(a(5)),l=P(a(340)),u=a(1893),o=a(1886),d=a(1892),c=P(a(1)),i=a(1888),f=P(a(50)),m=a(21),p=a(23),g=a(11),h=k(a(0)),w=a(138),y=P(a(2)),S=k(a(22)),I=P(a(1918)),M=a(350),b=P(a(242)),E=P(a(13)),v=a(6),_=P(a(4));function C(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return C=function(){return e},e}function k(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=C();if(t&&t.has(e))return t.get(e);var a={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var s=r?Object.getOwnPropertyDescriptor(e,n):null;s&&(s.get||s.set)?Object.defineProperty(a,n,s):a[n]=e[n]}return a.default=e,t&&t.set(e,a),a}function P(e){return e&&e.__esModule?e:{default:e}}const D=(0,c.default)(y.default)(e=>({borderRadius:4,pointerEvents:"auto",flex:"1 1 0px"})),F=(0,c.default)(y.default)({justifyContent:"center",flexDirection:"row",alignItems:"center",margin:"12px 12px 4px 12px"}),O={includeGroups:!0,includePages:!1,includeIntegratedMessageSearchResults:!1,includeSecureThreads:!1},N=(0,c.default)(y.default)({alignItems:"center",flex:1,paddingLeft:25});let j;t.ForwardItemStatus=j,function(e){e[e.UNCLICKED=0]="UNCLICKED",e[e.CLICKED=1]="CLICKED",e[e.SENDING=2]="SENDING"}(j||(t.ForwardItemStatus=j={}));const R={searchQueryChanged:p.InboxActions.search.searchQueryChanged,sendAttachmentForward:p.InboxActions.messages.sendAttachmentForward,sendMessageForward:p.InboxActions.messages.sendMessageForward,sendMessage:p.InboxActions.messages.sendMessage},K=(0,g.connect)((function(){const e=(0,d.getForwardViewSuggestionsSelector)();return t=>{const a=(0,p.getSearchInfo)(t,n.SearchSource.ThreadDetails),r=e(t);return{userId:(0,m.requireAuthenticationData)(t).userID,searchResults:a.searchResults,searchInfo:a,suggestions:r}}}),R)((function(e){const{attachment:t,message:a,onModalClear:o,elementRef:d,className:c,userId:m,searchResults:p,searchInfo:g,suggestions:w={},searchQueryChanged:y,sendAttachmentForward:C,sendMessageForward:k,sendMessage:P}=e,R=(0,v.useTheme)(),[K,L]=(0,h.useState)(""),[T,x]=(0,h.useState)({}),[z,A]=(0,h.useState)({}),U=(0,l.default)(K,200);(0,h.useEffect)(()=>{null!=U&&y(U,O,n.SearchSource.ThreadDetails)},[y,U]);const B=e=>{A(t=>({...t,[e]:j.CLICKED})),window.setTimeout(()=>{A(t=>({...t,[e]:j.SENDING}))},1500)},G=(0,h.useCallback)(e=>t?void(t&&t.attachmentFbid&&(C({threadKey:e.resultId,attachmentId:t.attachmentFbid}),B(e.resultId))):void(a&&a.message.threadKey&&a.message.timestampMs&&a.message.messageId&&(a.message.stickerId&&a.attachments&&a.attachments[0]&&a.attachments[0].attachmentType===n.AttachmentType.Sticker?(0,M.isHotlike)(a.message.stickerId)?C({threadKey:e.resultId,attachmentId:a.attachments[0].attachmentFbid}):P({senderId:m,threadKey:e.resultId,stickerId:a.message.stickerId,previewUrl:(0,r.default)(a.attachments[0].previewUrlInfo),previewUrlMimeType:a.attachments[0].previewUrlMimeType}):k({threadKey:e.resultId,forwardedMsgId:a.message.messageId,forwardedMsgThreadKey:a.message.threadKey,forwardedMsgTimestampMs:a.message.timestampMs}),B(e.resultId))),[a,t,m,C,k,P]);if((0,h.useEffect)(()=>{const e=p&&p.map(({profilePicture:e,secondaryProfilePicture:t,title:a,resultId:r})=>({picture:e,secondaryPicture:t,displayName:a,resultId:r}));x({[u.ThreadCategory.Results]:e||[]})},[p]),!t&&!a)return null;const{isLoadingMoreSearchResults:Q,hasNoSearchResults:W}=(0,i.getSearchStatus)(g,K);return(h.default.createElement(E.default,{name:"forwardView"},h.default.createElement(D,{className:c,ref:d,onMouseDown:e=>e.stopPropagation()},h.default.createElement(F,null,h.default.createElement(N,null,h.default.createElement(_.default,{use:"body-semibold"},s.default._("Forward",null,{hk:"1FXuRK"}))),o&&h.default.createElement(S.default,{icon:f.default,size:S.RoundButtonSize.Small,"aria-label":s.default._("Close Dialog",null,{hk:"3zP7Cd"}).toString(),buttonColor:R.colors.base40,telemetryName:"forwarding_modal_close_button",onClick:o})),h.default.createElement(b.default,{query:K,onQueryChange:L,autoFocus:!0}),h.default.createElement(I.default,{threadCategories:K&&T?T:w,onClick:G,isLoadingMoreSearchResults:Q,hasNoSearchResults:W,forwardingStatus:z,setForwardingStatus:A}))))}))},1918:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function({threadCategories:e,isLoadingMoreSearchResults:t,hasNoSearchResults:a,forwardingStatus:u,setForwardingStatus:d,onClick:f}){return c.default.createElement(m.default,null,c.default.createElement(w,null,e&&Object.keys(e).map(m=>{const g=e[m];return(c.default.createElement(c.default.Fragment,{key:m},c.default.createElement(i.default,{css:{paddingLeft:12}},c.default.createElement(p.default,{title:y[m]})),g&&g.length>0&&g.map(e=>e.resultId?c.default.createElement(n.default,{key:e.resultId,pictureUrl:(0,l.default)(e.picture),secondaryPictureUrl:(0,l.default)(e.secondaryPicture),displayName:e.displayName,threadKey:e.resultId,onClick:()=>f(e),forwardingStatus:u[e.resultId]?u[e.resultId]:s.ForwardItemStatus.UNCLICKED,setForwardingStatus:d}):c.default.createElement(i.default,{css:{paddingLeft:12}},c.default.createElement(p.default,{title:e.displayName}))),t&&c.default.createElement(r.default,{size:r.SpinnerSize.Small,delay:300,css:{marginTop:24,marginBottom:6}}),a&&c.default.createElement(o.NoResultsFound,null)))})))};var r=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=h();if(t&&t.has(e))return t.get(e);var a={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var s=r?Object.getOwnPropertyDescriptor(e,n):null;s&&(s.get||s.set)?Object.defineProperty(a,n,s):a[n]=e[n]}a.default=e,t&&t.set(e,a);return a}(a(82)),n=g(a(1919)),s=a(1879),l=g(a(27)),u=g(a(5)),o=a(1887),d=g(a(1)),c=g(a(0)),i=g(a(2)),f=g(a(33)),m=g(a(45)),p=g(a(186));function g(e){return e&&e.__esModule?e:{default:e}}function h(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return h=function(){return e},e}const w=(0,d.default)(f.default)({paddingRight:12,paddingBottom:8}),y={recents:u.default._("Recents",null,{hk:"33oZDt"}).toString(),top_groups:u.default._("Top Groups",null,{hk:"39KDMn"}).toString(),connections:u.default._("Connections",null,{hk:"Q1OBY"}).toString(),results:u.default._("Results",null,{hk:"2oNg3Q"}).toString()}},1919:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=v(a(345)),n=a(1879),s=a(8),l=v(a(5)),u=v(a(245)),o=v(a(1)),d=a(1920),c=v(a(598)),i=v(a(1921)),f=v(a(251)),m=a(21),p=a(23),g=a(11),h=E(a(0)),w=v(a(2)),y=E(a(22)),S=E(a(82)),I=a(6),M=v(a(4));function b(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return b=function(){return e},e}function E(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=b();if(t&&t.has(e))return t.get(e);var a={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var s=r?Object.getOwnPropertyDescriptor(e,n):null;s&&(s.get||s.set)?Object.defineProperty(a,n,s):a[n]=e[n]}return a.default=e,t&&t.set(e,a),a}function v(e){return e&&e.__esModule?e:{default:e}}const _=(0,o.default)(w.default)({height:50,flexDirection:"row",width:"100%",alignItems:"center",paddingLeft:"12px"}),C=(0,o.default)(w.default)({flex:1,marginTop:0,marginBottom:0,marginLeft:15,justifyContent:"center"}),k=(0,o.default)(w.default)({height:32,width:32,justifyContent:"center",alignItems:"center"});const P={sendAttachmentForward:p.InboxActions.messages.sendAttachmentForward};var D=(0,g.connect)((function(e,t){return{userID:(0,m.requireAuthenticationData)(e).userID,participants:(0,p.getParticipantListForThread)(e,t.threadKey),presence:(0,p.getThreadPresences)(e,t.threadKey),lastMessageInfo:(0,p.getLastMessageInfoForThread)(e,t)}}),P)((function(e){const{pictureUrl:t,secondaryPictureUrl:a,displayName:o,threadKey:m,onClick:p,forwardingStatus:g,setForwardingStatus:w,userID:b,participants:E,presence:v,lastMessageInfo:P}=e,D=(0,u.default)(v);(0,h.useEffect)(()=>{P&&1===P.status&&g===n.ForwardItemStatus.CLICKED&&w(e=>({...e,[m]:n.ForwardItemStatus.SENDING}))},[P,w,g,m]);const F=(0,I.useTheme)(),O=E.filter(e=>e.contactId!=b);let N;switch(g){case n.ForwardItemStatus.CLICKED:N=h.default.createElement(S.default,{size:S.SpinnerSize.Small});break;case n.ForwardItemStatus.SENDING:switch(P&&P.status){case s.MessageSendStatus.ServerReceived:case s.MessageSendStatus.SentOnly:N=h.default.createElement(i.default,{size:16,color:F.colors.base50});break;case s.MessageSendStatus.RetriableError:case s.MessageSendStatus.NonRetriableError:N=h.default.createElement(f.default,{size:16,color:F.colors.red});break;default:N=h.default.createElement(S.default,{size:S.SpinnerSize.Small})}break;default:N=h.default.createElement(y.default,{"aria-label":l.default._("Forward to{participant_name}",[l.default._param("participant_name",o)],{hk:"1s790p"}).toString(),telemetryName:"forward_attachment_button",icon:c.default,use:y.RoundButtonUse.Transparent,onClick:p})}return(h.default.createElement(_,{role:"link"},h.default.createElement(r.default,{profilePictureUrl:t,secondaryPictureUrl:a,participants:E,viewerId:b,presence:D}),h.default.createElement(C,null,h.default.createElement(M.default,{use:"body-semibold"},o),E.length>2&&h.default.createElement(M.default,{use:"caption",color:F.colors.flatBase70},(0,d.displayParticipantNames)(O))),h.default.createElement(k,null,N)))}));t.default=D},1921:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return n.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 16 16",height:e.height?e.height:e.size,width:e.width?e.width:e.size,color:e.color},n.default.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M8 16A8 8 0 108 0a8 8 0 000 16zm3.774-10.407a1 1 0 00-1.73-1.004L7.417 9.114a.15.15 0 01-.236.031L5.798 7.762a1 1 0 00-1.414 1.414l2.44 2.44a1 1 0 001.572-.205l3.378-5.818z",clipRule:"evenodd"}))};var r,n=(r=a(0))&&r.__esModule?r:{default:r}},2167:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=d(a(5)),n=a(28),s=a(11),l=d(a(0)),u=d(a(1879)),o=a(58);function d(e){return e&&e.__esModule?e:{default:e}}const c={clearModal:n.AppContextActions.clearModal};var i=(0,s.connect)(null,c)((function({forwardViewInfo:e,clearModal:t}){return e?l.default.createElement(o.Modal,{width:400,height:450,onHideModal:t,"aria-label":r.default._("Forward Message",null,{hk:"iEb6z"}).toString()},l.default.createElement(u.default,{onModalClear:t,attachment:e.attachment,message:e.message})):null}));t.default=i}}]);
//# sourceMappingURL=https://intern.facebook.com/intern/messenger/desktop/sourcemaps?archon_build_number=332019425&map_path=../sourcemaps/ForwardViewModal.bundle.js.map